create table Privilege (
   id bigint generated by default as identity,
   description varchar(255),
   primary key (id)
);

create table PrivilegeRole (
   privilegeId bigint not null,
   roleId bigint not null
);

create table Role (
   id bigint generated by default as identity,
   roleAuthority varchar(255) not null,
   primary key (id)
);

create table UserEntity (
   id bigint generated by default as identity,
   active boolean not null,
   password varchar(255),
   username varchar(255),
   primary key (id)
);

create table UserPrivilege (
   userId bigint not null,
   privilegeId bigint not null
);

alter table UserEntity 
   add constraint UK_jreodf78a7pl5qidfh43axdfb unique (username);

alter table PrivilegeRole 
   add constraint UK_orm50i59uyipqqq27nc8b8j60 unique (privilegeId, roleId);

alter table UserPrivilege 
   add constraint UK_leqqhi9culxrofm2clfsr5pd6 unique (userId, privilegeId);

alter table PrivilegeRole 
   add constraint FKgw5hr56xf8lrqllkgpr7820l9 
   foreign key (roleId) 
   references Role;

alter table PrivilegeRole 
   add constraint FKqplr3mcb9dm9v42fm6g4l0e69 
   foreign key (privilegeId) 
   references Privilege;

alter table UserPrivilege 
   add constraint FK6fv885gi8vw4e90mfsq0u56y3 
   foreign key (privilegeId) 
   references Privilege;

alter table UserPrivilege 
   add constraint FKtq5tlelt80y1v476oye60so93 
   foreign key (userId) 
   references UserEntity;